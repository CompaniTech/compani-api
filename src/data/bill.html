<style>
  body {
    font-family: 'Source Sans Pro', 'Roboto', 'Helvetica', 'Arial';
    font-size: 14px;
  }
  @page {
    size: A4 portrait;
    margin: 1.5cm;
  }
  table {
    border-collapse: collapse;
    font-size: 14px;
  }
  table, th, td {
    border: 1px solid rgba(0, 0, 0, 0.12);
  }
  th, td {
    padding: 5px;
    vertical-align: top;
  }
  .header {
    display: flex;
  }
  .logo {
    width: 70%;
  }
  .bill {
    width: 30%;
    text-align: right;
  }
  .company, .recipient {
    width: 50%;
  }
  .recipient {
    text-align: right;
  }
  .subscriptions, .events {
    width: 100%;
  }
  .total {
    width: 50%;
    margin-left: auto;
  }
  .capitalize {
    text-transform: capitalize;
  }
</style>

<div class="header">
  <div class="logo">
    <img src="{{ bill.logo }}">
  </div>
  <div class="bill">
    Facture</br>
    {{ bill.number }}<br />
    {{ bill.date }}<br />
    Paiment à réception<br />
  </div>
</div>
<br />
<br />
<div class="header">
  <div class="company">
    {{ bill.company.name }}<br />
    {{ bill.company.address.street }}<br />
    {{ bill.company.address.zipCode }} {{ bill.company.address.city }}<br />
    {{#if bill.company.type === "company"}}
    RCS : {{ bill.company.rcs }}
    {{else}}
    RNA : {{ bill.company.rna }}
    {{/if}}
  </div>
  <div class="recipient">
    <span>{{ bill.recipient.name }}</span><br />
    <span class="capitalize">{{ bill.recipient.address.street }}</span><br />
    {{ bill.recipient.address.zipCode }} <span class="capitalize">{{ bill.recipient.address.city }}</span><br />
  </div>
</div>
<br />
<br />
<br />
<br />
<div class="subscriptions-wrapper">
  <table class="subscriptions">
    <thead>
      <tr>
        <th align="left">Service</th>
        <th align="left">Prix unitaire TTC</th>
        <th align="left">Volume</th>
        <th align="left">Total TTC*</th>
      </tr>
    </thead>
    <tbody>
      {{#table bill.formattedSubs}}
        <tr>
          <td>{{ service }} (TVA {{vat}} %)</td>
          <td> {{ unitInclTaxes }}</td>
          <td> {{ hours }} </td>
          <td> {{ inclTaxes }}</td>
        </tr>
      {{/table}}
    </tbody>
  </table>
  <p>*ce total intègre les financements, majorations et éventuelles remises.</p>
</div>
<div class="wrapper">
  <table class="total">
    <thead>
      <tr>
        <th align="left">Total HT</th>
        <th align="left">TVA</th>
        <th align="left">Total TTC</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td> {{ bill.totalExclTaxes }}</td>
        <td> {{ bill.totalVAT }}</td>
        <td> {{ bill.netInclTaxes }}</td>
      </tr>
    </tbody>
  </table>
</div>
<br />
<br />
<br />
<br />
<br />
<p>Prestations réalisées chez {{ bill.customer.identity.title }} {{ bill.customer.identity.firstname }} {{ bill.customer.identity.lastname }}, <span class="capitalize">{{ bill.customer.contact.primaryAddress.fullAddress }}.</span></p>
<div class="wrapper">
  <table class="events">
    <thead>
      <tr>
        <th align="left">Date</th>
        <th align="left">Intervenant</t>
        <th align="left">Début</th>
        <th align="left">Fin</th>
        <th align="left">Service</th>
        {{#unless bill.forTpp}}
          <th align="left">Majoration</th>
        {{/unless}}
      </tr>
    </thead>
    <tbody>
    {{#table bill.formattedEvents}}
      <tr>
        <td> {{ date }} </td>
        <td> {{ identity }} </td>
        <td> {{ startTime }} </td>
        <td> {{ endTime }} </td>
        <td> {{ service }} </td>
        {{#unless @root/bill.forTpp}}
          <td>
            {{#each surcharges}}
              <div>
                + {{ percentage }}% ({{ name }}{{#if startHour}} {{ startHour }}-{{ endHour }}{{/if}})
              </div>
            {{/each}}
          </td>
        {{/unless}}
      </tr>
    {{/table}}
    </tbody>
  </table>
</div>
